-- MySQL Script generated by MySQL Workbench
-- Thu May 21 20:31:04 2020
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';


CREATE TABLE IF NOT EXISTS projeto_nf.colaboradores (
  ID_USER INT(11) NOT NULL AUTO_INCREMENT,
  LOGIN VARCHAR(8) NULL DEFAULT NULL,
  SENHA VARCHAR(40) NULL DEFAULT NULL,
  NOME VARCHAR(20) NULL DEFAULT NULL,
  SOBRENOME VARCHAR(20) NULL DEFAULT NULL,
  CARGO VARCHAR(30) NULL DEFAULT NULL,
  TELEFONE VARCHAR(14) NULL DEFAULT NULL,
  CELULAR VARCHAR(15) NULL DEFAULT NULL,
  CPF VARCHAR(11) NULL DEFAULT NULL,
  DATA_CADASTRO DATETIME NULL DEFAULT NULL,
  STATUS INT(1) NULL DEFAULT NULL,
  TIPO VARCHAR(1) NULL DEFAULT NULL,
  EMAIL VARCHAR(100) NULL DEFAULT NULL,
  LOGADO INT DEFAULT 0,
  PRIMARY KEY (ID_USER),
  UNIQUE INDEX EMAIL_UNIQUE (EMAIL ASC),
  INDEX colab (ID_USER ASC))
ENGINE = InnoDB
AUTO_INCREMENT = 9
DEFAULT CHARACTER SET = latin1;


CREATE TABLE IF NOT EXISTS categoria (
  ID_CATEGORIA INT(11) NOT NULL AUTO_INCREMENT,
  DES_CATEGORIA VARCHAR(30) NULL DEFAULT NULL,
  PRIMARY KEY (ID_CATEGORIA))
ENGINE = InnoDB
DEFAULT CHARACTER SET = latin1;




CREATE TABLE IF NOT EXISTS projeto_nf.fornecedor (
  ID_FORNECEDOR INT(11) NOT NULL AUTO_INCREMENT,
  NOME_RESPONSAVEL VARCHAR(45) NULL DEFAULT NULL,
  LOG_DOC CHAR(1) NULL DEFAULT NULL,
  CNPJ VARCHAR(14) NULL DEFAULT NULL,
  CPF VARCHAR(11) NULL DEFAULT NULL,
  DATA_CADASTRO DATETIME NULL DEFAULT NULL,
  STATUS CHAR(1) NULL DEFAULT NULL,
  TELEFONE VARCHAR(10) NULL DEFAULT NULL,
  TELEFONE2 VARCHAR(10) NULL DEFAULT NULL,
  RAZAO_SOCIAL VARCHAR(100) NULL DEFAULT NULL,
  ID_CATEGORIA_FK INT(11) NULL DEFAULT NULL,
  ENDERECO VARCHAR(100) NULL DEFAULT NULL,
  CIDADE VARCHAR(30) NULL DEFAULT NULL,
  ESTADO VARCHAR(25) NULL DEFAULT NULL,
  PAIS VARCHAR(25) NULL DEFAULT NULL,
  BAIRRO VARCHAR(25) NULL DEFAULT NULL,
  PRIMARY KEY (ID_FORNECEDOR),
  INDEX ID_FORNEC (ID_FORNECEDOR ASC),
  INDEX FRN_CATEG_idx (ID_CATEGORIA_FK ASC),
  CONSTRAINT FRN_CATEG
    FOREIGN KEY (ID_CATEGORIA_FK)
    REFERENCES projeto_nf.categoria (ID_CATEGORIA)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 2
DEFAULT CHARACTER SET = latin1;




CREATE TABLE IF NOT EXISTS PEDIDO_COMPRA (
  ID_PEDIDO INT NOT NULL AUTO_INCREMENT,
  ID_FORNECEDOR_FK INT NULL,
  DATA_COMPRA DATE NULL,
  CONTATO VARCHAR(45) NULL,
  ID_USER_FK INT NULL,
  OBS VARCHAR(200) NULL,
  VALOR_TOTAL FLOAT NULL,
  PRIMARY KEY (ID_PEDIDO),
  INDEX fk_user_idx (ID_USER_FK ASC),
  INDEX fk_fornecedor_idx (ID_FORNECEDOR_FK ASC),
  CONSTRAINT fk_user
    FOREIGN KEY (ID_USER_FK)
    REFERENCES projeto_nf.colaboradores (ID_USER)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_fornecedor
    FOREIGN KEY (ID_FORNECEDOR_FK)
    REFERENCES projeto_nf.fornecedor (ID_FORNECEDOR)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


CREATE TABLE IF NOT EXISTS PRODUTO_PEDIDO (
  ID_PROD_PEDIDO INT NOT NULL AUTO_INCREMENT,
  ID_PEDIDO_FK INT NULL,
  DESCRICAO_PROD VARCHAR(45) NULL,
  QTD_PROD FLOAT NULL,
  VALOR_UNIT FLOAT NULL,
  PRIMARY KEY (ID_PROD_PEDIDO),
  INDEX FK_PROD_idx (ID_PEDIDO_FK ASC),
  CONSTRAINT FK_PROD
    FOREIGN KEY (ID_PEDIDO_FK)
    REFERENCES projeto_nf.PEDIDO_COMPRA (ID_PEDIDO)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;






CREATE TABLE IF NOT EXISTS projeto_nf.nf_a (
  ID_NF_A INT(11) NOT NULL AUTO_INCREMENT,
  ID_FORNECEDOR_FK INT(11) NULL DEFAULT NULL,
  VALOR_NF DOUBLE NULL DEFAULT NULL,
  NUM_NF VARCHAR(44) NULL DEFAULT NULL,
  QTD_PARCELA INT(11) NULL DEFAULT NULL,
  ID_COLAB_FK INT(11) NULL DEFAULT NULL,
  DATA_ENTRADA DATE NULL DEFAULT NULL,
  STATUS_NF CHAR(1) NULL DEFAULT NULL,
  OBSERVACOES VARCHAR(500) NULL DEFAULT NULL,
  IMG_NF VARCHAR(100) NULL DEFAULT NULL,
  PRIMARY KEY (ID_NF_A),
  UNIQUE INDEX NUM_NF_UNIQUE (NUM_NF ASC),
  INDEX COLAB_idx (ID_COLAB_FK ASC),
  INDEX fk_forn_idx (ID_FORNECEDOR_FK ASC),
  CONSTRAINT A_COLAB
    FOREIGN KEY (ID_COLAB_FK)
    REFERENCES projeto_nf.colaboradores (ID_USER)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_forn
    FOREIGN KEY (ID_FORNECEDOR_FK)
    REFERENCES projeto_nf.fornecedor (ID_FORNECEDOR)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
AUTO_INCREMENT = 2
DEFAULT CHARACTER SET = latin1;

CREATE TABLE IF NOT EXISTS projeto_nf.produto_nf (
  ID_PROD_NF INT(11) NOT NULL AUTO_INCREMENT,
  DESCRICAO_PROD VARCHAR(100) NOT NULL,
  ID_NF_FK INT(11) NOT NULL,
  QTD_PROD INT(11) NOT NULL,
  VALOR_UNIT DOUBLE NOT NULL,
  PRIMARY KEY (ID_PROD_NF),
  INDEX NF (ID_NF_FK ASC),
  CONSTRAINT FK_NF
    FOREIGN KEY (ID_NF_FK)
    REFERENCES projeto_nf.nf_a (ID_NF_A)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_bin;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
